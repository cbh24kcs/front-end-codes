<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #box {
            width: 200px;
            height: 200px;
            position: absolute;
        }
    </style>
</head>
<body>
    <button id="btn">START</button>
    <div id="box"></div>

    <script>
        var btn = document.getElementById('btn')
        var box = document.getElementById('box')

        // 命令式
        // 声明式

        var getRandomColor = function() {
            return '#' +
                (function(color) {
                    return (color += '0123456789abcdef' [Math.floor(Math.random() * 16)]) && (color.length == 6) ? color : arguments.callee(color);
                })('');
        }

        var x = 0;
        var r = 0;
        var step = 5;
        var timeId;
        var bgColor = 'green';

        function updateBox() {
            box.style.left = x + 'px'
            box.style.transform = 'rotate(' + r + 'deg)'
            box.style.backgroundColor = getRandomColor();
            r = r + 1;
            x = x + step;
            if(x > 1000 || x < 0) step = step * -1;
        }

        btn.onclick = function() {
            timeId = setInterval(updateBox, 10);
        }

    </script>
</body>
</html>